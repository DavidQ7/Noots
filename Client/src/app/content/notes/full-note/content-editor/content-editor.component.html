<div
  appTheme
  appTextEditMenu
  appSelection
  [appMenuSelection]="elements"
  [appCopy]="refElements"
  (selectionEvent)="selectionHandler($event)"
  (selectionStartEvent)="selectionStartHandler($event)"
  [ngStyle]="{'width': sliderService ? sliderService?.mainWidth : ''}"
  class="main-content"
>
  <div class="top-section">
    <div class="note-color" [ngStyle]="{ backgroundColor: note?.color }"></div>
    <div class="labels-section">
      <div
        class="label"
        *ngFor="let label of note?.labels | noDeletedLabels"
        [ngStyle]="{ backgroundColor: label.color }"
      >
        <p>{{ label.name }}</p>
      </div>
    </div>
    <div class="title-section">
      <div
        #noteTitle
        [attr.contenteditable]="!isReadOnlyMode"
        (paste)="pasteCommandHandler($event)"
        [textContent]="note?.title"
        class="title"
        (input)="onTitleInput($event)"
        (keydown.enter)="handlerTitleEnter($event)"
      ></div>
      <div class="placeholder">Title</div>
      <div class="left-border"></div>
    </div>
  </div>

  <div cdkDropList class="content-section" (cdkDropListDropped)="drop($event)">
    <div
      cdkDrag
      (cdkDragStarted)="dragStarted($event)"
      (cdkDragEnded)="dragEnded($event)"
      class="item"
      *ngFor="let item of contents; let i = index"
    >
      <ng-container [ngSwitch]="item.typeId">
        <div
          [appDrop]="'is-placeholder-active'"
          (fileDropped)="uploadRandomFiles($event, i, item.id)"
          *ngSwitchCase="contentType.Text"
        >
          <app-html-text-part
            #htmlComp
            *ngIf="item.noteTextTypeId === textType.Default"
            [isSelected]="selectionService.isSelected(item.id)"
            [theme]="theme$ | async"
            [content]="item"
            [isReadOnlyMode]="isReadOnlyMode"
            (enterEvent)="enterHandler($event)"
            (deleteThis)="deleteRowHandler($event)"
            (concatThisWithPrev)="concatThisWithPrev($event)"
            (transformTo)="transformToTypeText($event)"
            (transformToFile)="transformToFileType($event)"
            (inputHtmlEvent)="updateHtmlHandler($event)"
            (onFocus)="onFocusHandler($event)"
          >
            <app-drag-drop-handler cdkDragHandle></app-drag-drop-handler>
          </app-html-text-part>
          <app-html-number-list
            #htmlComp
            *ngIf="item.noteTextTypeId === textType.Numberlist"
            [isSelected]="selectionService.isSelected(item.id)"
            [theme]="theme$ | async"
            [prevContent]="getTextContent(i - 1)"
            [prevType]="getTextContent(i - 1)?.noteTextTypeId"
            [content]="item"
            [isReadOnlyMode]="isReadOnlyMode"
            (enterEvent)="enterHandler($event)"
            (transformTo)="transformToTypeText($event)"
            (deleteThis)="deleteRowHandler($event)"
            (inputHtmlEvent)="updateHtmlHandler($event)"
            (concatThisWithPrev)="concatThisWithPrev($event)"
            (onFocus)="onFocusHandler($event)"
          >
            <app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
          ></app-html-number-list>
          <app-html-dot-list
            #htmlComp
            *ngIf="item.noteTextTypeId === textType.Dotlist"
            [isSelected]="selectionService.isSelected(item.id)"
            [theme]="theme$ | async"
            [content]="item"
            [isReadOnlyMode]="isReadOnlyMode"
            (enterEvent)="enterHandler($event)"
            (transformTo)="transformToTypeText($event)"
            (deleteThis)="deleteRowHandler($event)"
            (concatThisWithPrev)="concatThisWithPrev($event)"
            (inputHtmlEvent)="updateHtmlHandler($event)"
            (onFocus)="onFocusHandler($event)"
          >
            <app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
          ></app-html-dot-list>
          <app-html-check-list
            #htmlComp
            *ngIf="item.noteTextTypeId === textType.Checklist"
            [isSelected]="selectionService.isSelected(item.id)"
            [theme]="theme$ | async"
            [content]="item"
            [isReadOnlyMode]="isReadOnlyMode"
            (enterEvent)="enterHandler($event)"
            (transformTo)="transformToTypeText($event)"
            (deleteThis)="deleteRowHandler($event)"
            (concatThisWithPrev)="concatThisWithPrev($event)"
            (inputHtmlEvent)="updateHtmlHandler($event)"
            (onFocus)="onFocusHandler($event)"
          >
            <app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
          ></app-html-check-list>
          <app-html-headings
            #htmlComp
            *ngIf="item.noteTextTypeId === textType.Heading"
            [isSelected]="selectionService.isSelected(item.id)"
            [theme]="theme$ | async"
            [content]="item"
            [isReadOnlyMode]="isReadOnlyMode"
            (enterEvent)="enterHandler($event)"
            (deleteThis)="deleteRowHandler($event)"
            (concatThisWithPrev)="concatThisWithPrev($event)"
            (inputHtmlEvent)="updateHtmlHandler($event)"
            (onFocus)="onFocusHandler($event)"
          >
            <app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
          ></app-html-headings>
          <div class="custom-placeholder file-insert"></div>
        </div>
        <app-photos
          #htmlComp
          *ngSwitchCase="contentType.Photos"
          [isSelected]="selectionService.isSelected(item.id)"
          [theme]="theme$ | async"
          [content]="item"
          [noteId]="note.id"
          [isReadOnlyMode]="isReadOnlyMode"
          (uploadEvent)="uploadPhotoToAlbumHandler($event, note.id)"
          (deleteContentEvent)="deletePhotosCollection($event)"
          (deletePhotoEvent)="deletePhotoHandler($event, item.id, note.id)"
          ><app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
        ></app-photos>
        <app-audio-note
          #htmlComp
          *ngSwitchCase="contentType.Audios"
          [isSelected]="selectionService.isSelected(item.id)"
          [theme]="theme$ | async"
          [content]="item"
          [isReadOnlyMode]="isReadOnlyMode"
          (deleteContentEvent)="deleteAudiosCollection($event)"
          (deleteAudioEvent)="deleteAudioHandler($event, item.id, note.id)"
          (changeTitleEvent)="changeAudiosCollectionName(item.id, note.id, $event)"
          (uploadEvent)="uploadAudiosToCollectionHandler($event, note.id)"
          ><app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
        ></app-audio-note>
        <app-video-note
          #htmlComp
          *ngSwitchCase="contentType.Videos"
          [isSelected]="selectionService.isSelected(item.id)"
          [theme]="theme$ | async"
          [content]="item"
          [isReadOnlyMode]="isReadOnlyMode"
          (deleteContentEvent)="deleteVideosCollection($event)"
          (changeTitleEvent)="changeVideosCollectionName(item.id, note.id, $event)"
          (deleteVideoEvent)="deleteVideoHandler($event, item.id, note.id)"
          (uploadEvent)="uploadVideosToCollectionHandler($event, note.id)"
          ><app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
        ></app-video-note>
        <app-document-note
          #htmlComp
          *ngSwitchCase="contentType.Documents"
          [isSelected]="selectionService.isSelected(item.id)"
          [theme]="theme$ | async"
          [content]="item"
          [isReadOnlyMode]="isReadOnlyMode"
          (deleteContentEvent)="deleteDocumentsCollection($event)"
          (deleteDocumentEvent)="contentEditorDocumentsService.deleteDocumentHandler($event, item.id, note.id)"
          (uploadEvent)="uploadDocumentsToCollectionHandler($event, note.id)"
          ><app-drag-drop-handler cdkDragHandle></app-drag-drop-handler
        ></app-document-note>
        <div *ngSwitchDefault>Default</div>
      </ng-container>
      <div class="custom-placeholder" *cdkDragPlaceholder></div>
    </div>
    <div
      class="empty"
      (mousedown)="placeHolderClick($event)"
      (mousemove)="mouseEnter($event)"
      (mouseout)="mouseOut($event)"
    ></div>
  </div>
</div>
<app-text-edit-menu
  [style.top.px]="menuSelectionService.getTop"
  [style.left.px]="menuSelectionService.left"
  [style.visibility]="menuSelectionService.menuActive ? 'visible' : 'hidden'"
  (eventTransform)="transformToTypeText($event)"
  (updateText)="updateTextStyles($event)"
>
</app-text-edit-menu>
