<div appTheme>
  <div class="folder-sub-header" [ngClass]="{ 'sub-header-photo': (userBackground$ | async) }">
    <div class="container info-container">
      <div class="dot" [ngStyle]="{ backgroundColor: folder.color }"></div>
      <div class="navigation">
        <a [routerLink]="'/folders/' + (folder.folderTypeId | folderType)?.route" class="link">
          {{ (folder.folderTypeId | folderType)?.tranlate | translate }}
        </a>
        <span class="divider">/</span>
        <input
          #folderTitle
          [ngModel]="uiTitle"
          [placeholder]="'placeholder.folderSmall' | translate"
          (ngModelChange)="pushChangesToTitle($event)"
          [disabled]="canEdit === false"
        />
      </div>
    </div>
    <div *ngIf="canEdit" class="container buttons-container">
      <button
        class="side-button"
        type="button"
        name="Color"
        #color
        (click)="openChangeColorPopup()"
      >
        <div class="inner-content">
          <div class="icon">
            <mat-icon svgIcon="color" [inline]="true"></mat-icon>
          </div>
          <p>{{ 'menu.color' | translate }}</p>
        </div>
        <div class="ripple-container" matRipple [matRippleTrigger]="color"></div>
      </button>
      <button
        *ngIf="(user$ | async).id === folder.userId"
        class="side-button"
        type="button"
        name="share"
        #share
        (click)="menuButtonService.openShareWithFolders()"
      >
        <div class="inner-content">
          <div class="icon">
            <mat-icon svgIcon="share" [inline]="true"></mat-icon>
          </div>
          <p>{{ 'menu.share' | translate }}</p>
        </div>
        <div class="ripple-container" matRipple [matRippleTrigger]="share"></div>
      </button>
      <button
        class="side-button icon-only"
        type="button"
        name="more"
        #more
        [matMenuTriggerFor]="menu"
      >
        <div class="inner-content">
          <div class="icon">
            <mat-icon [inline]="true">more_horiz</mat-icon>
          </div>
        </div>
        <div class="ripple-container" matRipple [matRippleTrigger]="more"></div>
      </button>
    </div>
    <div class="folder-color" [ngStyle]="{ backgroundColor: folder.color }"></div>
  </div>
</div>
<mat-menu #menu="matMenu" [class]="(theme$ | async) === theme.Dark ? 'dark-menu' : null">
  <ng-container
    *ngFor="
      let item of getFolderMenu(folder)
        | manageMenuButtons: canEdit:(user$ | async).id === folder?.userId:true
    "
  >
    <button
      (click)="item.operation()"
      mat-menu-item
      type="button"
      [name]="item.icon"
      *ngIf="(item?.isVisible | async) === (true || undefined || null)"
    >
      <mat-icon
        *ngIf="item.icon !== 'history'"
        [svgIcon]="item.icon"
        style="width: 1rem; height: 1rem; font-size: 1rem"
      ></mat-icon>
      <span> {{ 'menu.' + item.icon | translate }} </span>
    </button>
  </ng-container>
</mat-menu>
