<div appTheme class="sub-nav">
  <div
    class="sub-nav-section"
    *ngIf="pService.stateSidebar"
    [@sidebarCloseOpen]
    [@.disabled]="pService.check()"
  >
    <ng-scrollbar class="background-section" [visibility]="'hover'" [appearance]="'compact'">
      <div
        class="background"
        *ngFor="let item of backgrounds$ | async"
        [ngClass]="item.id === (user$ | async).currentBackground?.id ? 'active-background' : ''"
      >
        <img alt="background" [src]="item.path | getImage" (click)="setCurrent(item.id)" />
        <div class="thumbnail" (click)="removeBackground(item.id)">
          <div class="icon">
            <mat-icon svgIcon="cancelThin" [inline]="true"></mat-icon>
          </div>
        </div>
      </div>
    </ng-scrollbar>
    <div class="information">
      <div class="separator"></div>
      <div class="progress-section">
        <div class="billing">B</div>
        <div class="progress-bar-section">
          <div class="text">
            <p>50mb of 100MB</p>
          </div>
          <div class="progress-bar">
            <div class="indicator"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div
    class="overlay"
    (click)="pService.cancelSideBar()"
    [ngClass]="pService.stateSidebar ? 'visible' : ''"
  ></div>
</div>

<div
  appTheme
  class="content"
  [ngStyle]="{'background-image': (user$ | async).currentBackground?.path !== null ? 'url(' + (userBackground$ | async) + ')' : ''}"
>
  <ng-scrollbar [visibility]="'hover'" [appearance]="'compact'">
    <div class="content-inner">
      <div class="main">
        <div class="sections">
          <div class="header">
            <p>{{ 'profile.sectionProfile' | translate }}</p>
          </div>
          <div class="user-info generic-section">
            <div class="photo" appDrop>
              <img
                *ngIf="!photoError"
                [src]="(user$ | async).photoId | getImage"
                alt="User photo"
                (error)="changeSource()"
              />
              <div *ngIf="photoError" class="photo-error">
                <mat-icon svgIcon="people" [inline]="true"></mat-icon>
              </div>
              <input
                type="file"
                accept="image/jpeg,image/png"
                name="choose photo"
                id="upl"
                (change)="uploadImageUserPhoto($event)"
              />
              <label for="upl" class="change-photo" #profilePhoto>
                <div class="icon">
                  <mat-icon svgIcon="newphoto" [inline]="true"></mat-icon>
                </div>
                <div class="ripple-container" matRipple [matRippleTrigger]="profilePhoto"></div>
              </label>
            </div>
            <div class="fields">
              <div class="field">
                <div class="field-name">
                  <p>{{ 'profile.nameUser' | translate }}</p>
                </div>
                <input type="text" placeholder="Your name" [(ngModel)]="userName" />
              </div>
              <div class="field">
                <div class="field-name">
                  <p>{{ 'profile.email' | translate }}</p>
                </div>
                <input
                  type="text"
                  placeholder="Your name"
                  disabled
                  value="{{(user$ | async).email}}"
                />
                <div class="help-info">
                  <p>{{ 'profile.descriptionEmail' | translate }}</p>
                </div>
              </div>
            </div>
          </div>
          <div class="managment-buttons generic-section">
            <button
              class="generic-button"
              type="button"
              name="Log out button"
              #logOut
              (click)="logout()"
            >
              <div class="content-button">
                <div class="icon">
                  <i class="icon-logout"></i>
                </div>
                <p>{{ 'profile.logOut' | translate }}</p>
              </div>
              <div class="ripple-container" matRipple [matRippleTrigger]="logOut"></div>
            </button>
            <button
              class="generic-button"
              type="button"
              name="Update button"
              #updateProfile
              (click)="updateName()"
            >
              <div class="content-button">
                <p>{{ 'profile.update' | translate }}</p>
              </div>
              <div class="ripple-container" matRipple [matRippleTrigger]="updateProfile"></div>
            </button>
          </div>
        </div>
        <div class="sections">
          <div class="header">
            <p>{{ 'profile.sectionGeneral' | translate }}</p>
          </div>
          <div class="billing-forms generic-section">
            <div class="form"></div>
            <div class="form"></div>
            <div class="form"></div>
          </div>
        </div>
        <div class="sections">
          <div class="header">
            <p>{{ 'profile.sectionAccount' | translate }}</p>
          </div>
          <div class="account-setting generic-section">
            <div class="field-language">
              <div class="field-name">
                <p>{{ 'profile.language' | translate }}</p>
              </div>
              <app-select
                *ngIf="(languages$ | async)"
                class="dropdown-button"
                [translate]="'languages'"
                [selectValue]="(language$ | async)"
                [selectObjectProperty]="'name'"
                (selectValueChange)="setLanguage($event)"
              >
                <app-select-option *ngFor="let item of languages$ | async" [value]="item">
                  {{ 'languages.' + item.name | translate }}
                </app-select-option>
              </app-select>
            </div>
            <div class="field-key">
              <div class="field-name">
                <p>{{ 'profile.personalKey' | translate }}</p>
              </div>
              <div class="personal-key">
                <input type="password" name="Personal key" />
                <button class="generic-button" type="button" name="Update button" #changeKey>
                  <div class="content-button">
                    <p>{{ 'profile.changeKey' | translate }}</p>
                  </div>
                  <div class="ripple-container" matRipple [matRippleTrigger]="changeKey"></div>
                </button>
                <button class="generic-button" type="button" name="Reset button" #resetKey>
                  <div class="content-button">
                    <p>{{ 'profile.resetKey' | translate }}</p>
                  </div>
                  <div class="ripple-container" matRipple [matRippleTrigger]="resetKey"></div>
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="sections">
          <div class="header">
            <p>{{ 'profile.sectionPersonalization' | translate }}</p>
          </div>
          <div class="personalization-setting generic-section">
            <div class="fields">
              <div class="field">
                <div class="general-row">
                  <div class="field-name">
                    <p>{{ 'profile.theme' | translate }}</p>
                  </div>
                  <app-button-toggle
                    class="toggle"
                    [value]="(theme$ | async).name === 'dark' ? false : true"
                    [style]="'primary'"
                    (valueChange)="changeTheme($event)"
                  >
                    <app-toggle-text on> {{ 'profile.themeDark' | translate }}</app-toggle-text>
                    <app-toggle-text off [color]="'white'">
                      {{ 'profile.themeLight' | translate }}</app-toggle-text
                    >
                  </app-button-toggle>
                </div>
                <div class="help-info">
                  <p>
                    {{ 'profile.genericTooltip' | translate }}<span>
                      {{ 'profile.genericPreview' | translate }}</span
                    >
                  </p>
                </div>
              </div>
              <div class="field">
                <div class="general-row">
                  <div class="field-name">
                    <p>{{ 'profile.noteSize' | translate }}</p>
                  </div>
                  <app-button-toggle
                    class="toggle"
                    [value]="(fontSize$ | async).name === 'medium' ? false : true"
                    [style]="'primary'"
                    (valueChange)="changeFontSize($event)"
                  >
                    <app-toggle-text
                      on
                      [color]="(theme$ | async).name === 'light' && (fontSize$ | async).name === 'medium' ? 'white' : (theme$ | async).name === 'dark' ? 'white' : 'black'"
                    >
                      {{ 'profile.noteDefault' | translate }}</app-toggle-text
                    >
                    <app-toggle-text
                      off
                      [color]="(theme$ | async).name === 'light' && (fontSize$ | async).name === 'medium' ? 'black' : 'white'"
                    >
                      {{ 'profile.noteBig' | translate }}</app-toggle-text
                    >
                  </app-button-toggle>
                </div>
                <div class="help-info">
                  <p>
                    {{ 'profile.genericTooltip' | translate }}<span>
                      {{ 'profile.genericPreview' | translate }}</span
                    >
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </ng-scrollbar>
</div>

<input
  #uploadFile
  type="file"
  accept="image/jpeg,image/png"
  hidden="true"
  (change)="uploadImage($event)"
/>
